{% extends 'events/layout.html' %}
{% block content %}

<h1>RSVP to Events</h1>

<div class="event-cards">
    {% for item in event_rsvp_status %}
        <div class="event-card">
            <h2>{{ item.event.title }}</h2>
            <p><strong>Date:</strong> {{ item.event.date }}</p>
            <p><strong>Location:</strong> {{ item.event.location }}</p>
            <p><strong>Description:</strong> {{ item.event.description }}</p>
            <p><strong>Attendees:</strong> {{ item.event.attendees_count }}</p>

            <form method="post" action="{% url 'rsvp_event' item.event.pk %}">
                {% csrf_token %}
                <label for="status_{{ item.event.pk }}">Your RSVP:</label>
                <select id="status_{{ item.event.pk }}" name="status" class="form-control">
                    <option value="YES" {% if item.status == 'YES' %}selected{% endif %}>Yes</option>
                    <option value="NO" {% if item.status == 'NO' %}selected{% endif %}>No</option>
                    <option value="MAYBE" {% if item.status == 'MAYBE' %}selected{% endif %}>Maybe</option>
                </select>
                <button type="submit">Change</button>
            </form>
        </div>
    {% empty %}
        <p>No invites available at the moment.</p>
    {% endfor %}
</div>

{% endblock %}